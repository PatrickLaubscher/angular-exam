
<div class="container">

    <section>
        @if(serverError()) {
            <p class="danger">{{serverError()}}</p>
        }
    </section>

    @if(picture.hasValue()){
        
    <section>
        <div class="col-lg-10 mx-auto">

            @let pict = picture.value();

            <h1 class="mb-4">
                {{pict.title}}
            </h1>
            
            
            <img class="mb-4" [src]="pict.imageLink" alt="{{pict.title}}">

            <p class="fs-4">
                {{pict.description}}
            </p>

            <button class="like fs-5 d-block" (click)="like()">
                @if(pict.likes?.length == 0) {
                <ng-icon name="bootstrapSuitHeart" ></ng-icon>
                } @else {
                <ng-icon name="bootstrapSuitHeartFill" ></ng-icon>
                <span class="p-1">{{pict.likes?.length}}</span>
                }
            </button>

            <hr>

            <h2 class="fs-4">
                Auteur: 
                {{pict.author.displayName}}
            </h2>
            <p>
                <a [routerLink]="['/author-pictures', pict.author.id]">Voir les images de l'auteur</a>
            </p>

        </div>

    </section>    

    <section>
        <div class="col-lg-10 mx-auto">

            <h2 class="mb-4">Commentaires</h2>

            @if(comment.hasValue()) {

                @for(item of comment.value(); track item.id) {
                    <article class="border p-4 mb-4">
                        <p class="fs-4">{{item.content}}</p>
                        <p>De <span class="text-bold">{{item.author.displayName}}</span></p>
                        <p>Commentaire posté le {{item.createdAt | date:'medium':'':'fr' }}</p> 
                    </article>
   
                }
                
            } @else {
                <p>L'image n'a aucun commentaire pour le moment.</p>
            }

            <hr>
            <h3 class="mt-5 fs-5">Ajouter un commentaire à l'image</h3>
            <app-comment-form [picture]="picture.value()" (commentOutput)="addComment($event)" />

        </div>
    </section>

            } @else {
                <p>Picture not found.</p>
        }




</div>


